<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: request.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: request.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>'use strict';

/**
 * Extends {@link http://expressjs.com/api.html#req.params express Request} object to support additional methods.
 *
 * @example
 * req = require('./request').extend(req);
 *
 * @module request
 */

/**
 * @private
 */
var _ = require('underscore');

/**
 * @class
 * @mixes req
 */
var Request = {

	/**
	 * @param {String} moduleName
	 * @param {String} controllerName
	 * @param {String} actionName
	 */
	setRoute: function (moduleName, controllerName, actionName) {
		if (this.module) {
			this.history.push(this.getRoute());
		}
		this.module = moduleName;
		this.controller = controllerName;
		this.action = actionName;
	},

	/**
	 * @return {String}
	 */
	getRoute: function () {
		return [this.module, this.controller, this.action].join('/');
	},

	/**
	 * @return {String}
	 */
	getModule: function () {
		return this.module;
	},

	/**
	 * @return {String}
	 */
	getController: function () {
		return this.controller;
	},

	/**
	 * @return {String}
	 */
	getAction: function () {
		return this.action;
	},

	/**
	 * @return {Array}
	 */
	getHistory: function () {
		return this.history;
	},

	getFiles: function (name) {

		var files = [];

		if (this.files[name] !== undefined) {
			if (Object.prototype.toString.call(this.files[name]) === '[object Object]') {
				files = [
					this.files[name]
				];
			} else if (Object.prototype.toString.call(this.files[name]) !== '[object Array]') {
				files = this.files[name];
			}
		}

		console.log("files --> request.js:47", files.map(function (file) {
			return file.name;
		}));

		return files;
	},

	/**
	 * @return {String|null}
	 */
	getPayloadId: function () {
		return this.param('payloadId') || null;
	}
};

/**
 * @param {req} req
 * @return {Request}
 */
exports.extend = function (req) {
	req.module = null;
	req.controller = null;
	req.action = null;
	req.history = [];
	_.functions(Request).forEach(function (functionName) {
		req[functionName] = Request[functionName].bind(req);
	});
	return req;
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-bootstrap.html">bootstrap</a></li><li><a href="module-puma.html">puma</a></li><li><a href="module-request.html">request</a></li><li><a href="module-response.html">response</a></li></ul><h3>Classes</h3><ul><li><a href="module-request-Request.html">Request</a></li><li><a href="module-response-Response.html">Response</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Feb 28 2013 18:07:10 GMT+1100 (EST)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
